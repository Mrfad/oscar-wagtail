# solution for products not showing in oscar version 3.2.5
class CatalogueView(BaseSearchView):
    """
    Browse all products in the catalogue
    """

    form_class = BrowseCategoryForm
    context_object_name = "products"
    template_name = "oscar/catalogue/browse.html"
    enforce_paths = True

    def get(self, request, *args, **kwargs):
        try:
            return super().get(request, *args, **kwargs)
        except Http404:
            # Redirect to page one.
            messages.error(request, _("The given page number was invalid."))
            return redirect("catalogue:index")

    def get_context_data(self, *args, **kwargs):
        ctx = super().get_context_data(*args, **kwargs)
        ctx["summary"] = _("All products")
        from oscar.apps.catalogue.models import Product # add this line 
        ctx["object_list"] = Product.objects.filter(is_public=True) # and this line
        return ctx


# working loop through all categories and subcategories only 2 level depth
{% category_tree depth=2 as tree_categories %}
<ul class="filter-categories__list">
    {% for tree_category in tree_categories %}
        {% if tree_category.has_children %}
            <!-- Render the parent category -->
            <li class="filter-categories__item filter-categories__item--current">
                <a href="{{ tree_category.url }}">{{ tree_category.name }}</a>
                <div class="filter-categories__counter">
                    {{ tree_category.category.get_num_products }}
                </div>
            </li>
            <!-- Render the child categories -->
            {% for child_category in tree_category.get_children %}
                <li class="filter-categories__item filter-categories__item--child">
                    <a href="{{ child_category.url }}">{{ child_category.name }}</a>
                    <div class="filter-categories__counter">
                        {{ child_category.category.get_num_products }}
                    </div>
                </li>
            {% endfor %}
        {% else %}
            <!-- Render categories without children -->
            <li class="filter-categories__item filter-categories__item--parent">
                <a href="{{ tree_category.url }}">{{ tree_category.name }}</a>
                <div class="filter-categories__counter">
                    {{ tree_category.category.get_num_products }}
                </div>
            </li>
        {% endif %}
    {% endfor %}
</ul>